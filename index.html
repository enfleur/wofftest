<!DOCTYPE html>
<html lang="ko" prefix="og: http://ogp.me/ns#">
<meta property="og:title" content="앱제목">
<meta property="og:type" content="website">
<meta property="og:description" content="페이지 설명">
<meta property="og:url" content="https://line.worksmobile.com/jp/">
<meta property="og:site_name" content="사이트명">
<meta property="og:image" content="https://line.worksmobile.com/jp/wp-content/uploads/img-logo-1.svg">
    
    <head>
        <title>WOFF Starter</title>
        <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>
        <!-- for real
        <script charset="utf-8" src="https://static.worksmobile.net/static/wm/woff/edge/1/sdk.js"></script>
-->
        <script charset="utf-8" src="https://kr1-alpha-liff.worksmobile.com/assets/liff/edge/test/sdk.js"></script>
        <script type="text/javascript">
          function initializeWoff(woffId) {

            woff
                .init({
                    woffId: woffId
                })
                .then(() => {
                   alert('inited woff\r\ngetOS : ' + woff.getOS()
                         + '\r\ngetLanguage : ' + woff.getLanguage()
                         + '\r\ngetVersion : ' + woff.getVersion()
                         + '\r\ngetLineWorksVersion : ' + woff.getLineWorksVersion()
                         + '\r\ngetProfile().displayName : ' + woff.getProfile()
                         + '\r\ngetAccessToken : ' + woff.getAccessToken()
                        );
                })
                .catch((err) => {
                    console.log('WOFF Initialization failed ', err);
                });
        }           
            
        $(document).ready(function () {

            var woffId = "CYvqEM9J-Xx5qb6vFlKUkw";
            initializeWoff(woffId);

            // 메시지 보내기 핸들러 등록
            document.getElementById('sendMessageButton').addEventListener('click', function() {
              if (!woff.isInClient()) {
                sendAlertIfNoInClient();
              } else {
                  alert('click event');
                  
                woff.sendMessage({
                    content: "정글바베큐 청계산점입니다.\n6월2일 6시30분예약 4명이시구요~"
                }).then(function() {
                  window.alert('Message sent');
                }).catch(function(error) {
                  window.alert('Error sending message: ' + error);
                });
                  
              }
            });    
 
            // 봇 메시지 보내기 핸들러 등록
            document.getElementById('sendBotMessageButton').addEventListener('click', function() {
              if (!woff.isInClient()) {
                sendAlertIfNoInClient();
              } else {          
                woff.sendBotMessage({
                    accountId : 'enfleur@nwetest.com',
                    content: {
                        type : 'text',
                        text : 'Hello, World!'
                    }
                }).then(function() {
                  window.alert('Bot Message sent');
                }).catch(function(error) {
                  window.alert('Error sending message: ' + error);
                });
                  
              }
            });    
            
            // 창닫기 핸들러 등록
            document.getElementById('closeWindowButton').addEventListener('click', function() {
                woff.closeWindow();
            });
            
            // 창열기 핸들러 등록
            document.getElementById('openWindowButton').addEventListener('click', function() {
                woff.openWindow({
                  url: "https://line.worksmobile.com/jp/",
                  external: true
                });
            });                   
        })
         
        </script>
          

        
    </head>
    <body>
        <h2>hello! works!!</h2>
        <button id="sendMessageButton">send Message</button>
        <button id="sendBotMessageButton">send Bot Message</button>
        <button id="closeWindowButton">close Window</button>
        <button id="openWindowButton">open Window</button>        
    </body>
</html>
